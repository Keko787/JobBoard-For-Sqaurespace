<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
  <!--<link rel="stylesheet" href="style.css">-->
  <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

  <style>
    li {
      list-style: none;
    }
    a {
      margin-left: 2.5%;
    }
  </style>
</head>
<body>
  <div id="app">

    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3">
          <div>
            <h3>Department:</h3>
            <ul>
              <li v-for="department in departments" :key="department">
                <input class="form-check-input" type="checkbox" v-model="selectedDepartments" :value="department">
                {{ department }}
              </li>
            </ul>
          </div> 
  
          <div>
            <h3>Location:</h3>
            <ul>
              <li v-for="location in locations" :key="location">
                <input class="form-check-input" type="checkbox" v-model="selectedLocations" :value="location">
                {{ location }}
              </li>
            </ul>
          </div>
        </div>
  
        <div class="col-md-9">
          <ul>
            <li v-for="job in filteredJobs" :key="job.id">
              <div class="card" style="width: 50rem; padding: 15px; margin: 10px 0;">
                <div class="card-body">
                  <h4 class="card-title">{{ job.title }}</h4>
                  <h6 class="card-subtitle mb-2 text-muted">{{job.location}}</h6>
                  <h6 class="card-subtitle mb-2 text-muted">{{job.department}}</h6>
                  <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#jobModal-{{ job.id }}">Job Description</button>
                  
                  <!--<button @click="openPopup(job)" class="btn btn-secondary">View Description</button>-->
                  <!--IF I NEED TO DIRECT TO DIFFERENT APPLICATIONS<button @click="navigateToJobPage(job.id)" class="btn btn-primary apply-button apply-for-job">Apply</button>-->
                  
                  <!--ONLY ONE APPLICATION NEEDED TO BE SENT--><a href="https://example.com/job/" class="btn btn-primary">Apply</a>
                </div>
              </div>
              
              <!-- Add the modal -->
              <div class="modal fade" :id="'jobModal-' + job.id" tabindex="-1" role="dialog" aria-labelledby="jobModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="jobModalLabel">{{ job.title }}</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <p>{{ job.description }}</p>
                      <p>Location: {{ job.location }}</p>
                      <p>Department: {{ job.department }}</p>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <a :href="'https://example.com/job/' + job.id" class="btn btn-primary">Apply</a>
                    </div>
                  </div>
                </div>
              </div>
              <!--<div v-if="job.showPopup" class="popup">
                <div class="popup-content">
                  <h3>{{ job.title }}</h3>
                  <p>{{ job.description }}</p>
                  <p>Location: {{ job.location }}</p>
                  <p>Department: {{ job.department }}</p>
                  <button @click="closePopup(job)">Close</button>
                  <button @click="navigateToJobPage(job.id)" class="btn btn-primary apply-button apply-for-job">Apply</button>
                </div>
              </div>-->
            </li>    
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/vue@next"></script>
  <!--<script src="script.js"></script>-->
  

  <script>
    const app = Vue.createApp({
    data() {
      return {
        jobs: [
          {
            id: 1,
            title: 'Front-end Developer',
            description: 'We are looking for a skilled front-end developer to join our team.',
            location: 'New York, USA',
            department: 'Development',
            showPopup: false
          },
          {
            id: 2,
            title: 'Backend Developer',
            description: 'We are hiring a backend developer to work on our server infrastructure.',
            location: 'London, UK',
            department: 'Development',
            showPopup: false
          },
          {
            id: 3,
            title: 'UX Designer',
            description: 'Join our UX design team and help create intuitive user experiences.',
            location: 'San Francisco, USA',
            department: 'Design',
            showPopup: false
          },
          // Add more job objects as needed
        ],
        selectedDepartments: [],
        selectedLocations: [],
        departments: [],
        locations: []
      };
    },
    computed: {
      filteredJobs() {
        let filteredJobs = this.jobs;
  
        if (this.selectedDepartments.length > 0) {
          filteredJobs = filteredJobs.filter(job => this.selectedDepartments.includes(job.department));
        }
  
        if (this.selectedLocations.length > 0) {
          filteredJobs = filteredJobs.filter(job => this.selectedLocations.includes(job.location));
        }
  
        return filteredJobs;
      }
    },
    methods: {
      openPopup(job) {
        job.showPopup = true;
      },
      closePopup(job) {
        job.showPopup = false;
      },
      //navigateToJobPage(jobId) { // if I need to send the user to different applications
        // Replace the URL with the desired job page URL
        //window.location.href = 'https://example.com/job/' + jobId;
      //}
    },
    mounted() {
      this.departments = [...new Set(this.jobs.map(job => job.department))];
      this.locations = [...new Set(this.jobs.map(job => job.location))];
    }
  });
  
  app.mount('#app');
  </script>
</body>
</html>